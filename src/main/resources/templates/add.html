<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Add Student</title>
<!-- <th:block th:insert="~{/templates/head::link}"> </th:block>
<th:block th:insert="~{/templates/head::script}"> </th:block> -->
<!-- MDB -->
<script type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.js"></script>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Font Awesome -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
	rel="stylesheet" />
<!-- Google Fonts -->
<link
	href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
	rel="stylesheet" />
<!-- MDB -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.css"
	rel="stylesheet" />
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" type="text/css"
	th:href="@{/resource/css/list.css}">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<style>
.input__row {
	display: flex;
}

.pb-3 {
	width: 50%;
}

.input_items {
	width: 50%;
}
</style>


</head>
<body>
	<!-- 	<div th:replace="~{/templates/menu::menu}"></div> -->

	<form th:action="@{/save}" method="POST" th:object="${obj}" id='form'>
		<section class="vh-100" style="background-color: #fbfbfb;">
			<div class="container h-100">
				<div class="row d-flex justify-content-center align-items-center"
					style="padding-top: 50px;">
					<div class="col-xl-12">
						<h3 class="mb-4" style="color: #150ECC" th:text="${title}"></h3>
						<div class="card" style="border-radius: 15px;">
							<div class="card-body">
								<div class="row align-items-center pt-4 pb-3">
									<div class="col-md-3 ps-5">
										<h6 class="mb-0">ID</h6>
									</div>
									<div class="col-md-9 pe-5">

										<input th:field="*{ID}" class="form-control form-control-lg"
											id='id' required />
										<span th:text="${msg}"></span>
									</div>
								</div>
								<div class='input__row'>
									<div class="row align-items-center pt-4 pb-3">
										<div class="col-md-3 ps-5">
											<h6 class="mb-0">ID_USER</h6>
										</div>
										<div class="col-md-9 pe-5">

											<input th:field="*{ID_USER}"
												class="form-control form-control-lg" id='id_user' required />

										</div>
									</div>
									<!-- 		<hr class="mx-n3"> -->
									<div class="row align-items-center py-3 input_items">
										<div class="col-md-3 ps-5 email__title">
											<h6 class="mb-0">Email</h6>
										</div>
										<div class="col-md-9 pe-5">
											<input th:field="*{email}"
												class="form-control form-control-lg" id='email' required />
											<span></span>
										</div>
									</div>
									<hr class="mx-n3">
								</div>
								<div class='input__row'>
									<div class="row align-items-center py-3 input_items">
										<div class="col-md-3 ps-5">
											<h6 class="mb-0">Phone</h6>
										</div>
										<div class="col-md-9 pe-5">
											<input th:field="*{phone}"
												class="form-control form-control-lg" type="number"
												id='phone' required /> <span></span>
										</div>
									</div>

									<div class="row align-items-center pt-4 pb-3">
										<div class="col-md-3 ps-5">
											<h6 class="mb-0">FullName</h6>
										</div>
										<div class="col-md-9 pe-5">
											<input th:field="*{fullname}"
												class="form-control form-control-lg" id='fullname' required />
										</div>
									</div>
								</div>

								<div class='input__row'>
									<div class="row align-items-center pt-4 pb-3">
										<div class="col-md-3 ps-5">
											<h6 class="mb-0">Address</h6>
										</div>
										<div class="col-md-9 pe-5">
											<input th:field="*{address}"
												class="form-control form-control-lg" id='address' required />
										</div>
									</div>

									<div class="row align-items-center pt-4 pb-3">
										<div class="col-md-3 ps-5">
											<h6 class="mb-0">Major</h6>
										</div>
										<div class="col-md-9 pe-5">
											<input th:field="*{major}"
												class="form-control form-control-lg" id='major' required />
										</div>
									</div>
								</div>

								<div class='input__row'>
									<div class="row align-items-center pt-4 pb-3">
										<div class="col-md-3 ps-5">
											<h6 class="mb-0">Sex</h6>
										</div>
										<div class="col-md-9 pe-5">
											<input th:field="*{sex}" class="form-control form-control-lg"
												id='sex' required />
										</div>
									</div>

									<div class="row align-items-center pt-4 pb-3">
										<div class="col-md-3 ps-5">
											<h6 class="mb-0">Birthday</h6>
										</div>
										<div class="col-md-9 pe-5">
											<input th:field="*{birthDay}"
												class="form-control form-control-lg" id='birthday' required />
										</div>
									</div>
								</div>

								<hr class="mx-n3">
								<div class="text-center">
									<button type="submit" class="btn btn-success"
										style="width: 200px; height: 40px; margin: 20px;">SAVE</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</form>
	<!-- 	<div th:replace="~{/templates/footer::#footer}"></div> -->
</body>

<!-- <script defer src="/resources/js/addStudent.js"></script> -->
<script>

const form = document.querySelector('#form');
const emailInput = document.getElementById('email');
var errorMessageSpan = document.querySelector("#email + span");
const phoneInput = document.getElementById('phone');
var errorMessageSpan2 = document.querySelector("#phone + span");

const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
const phoneRegex = /^[0-9]{10}$/;


const validateEmail = (email) => {
	return emailRegex.test(String(email).toLowerCase());
}

const validatePhone = (phone) => {
	return phoneRegex.test(String(phone).toLowerCase());
}

const validateForm = (event) => {
	event.preventDefault(); // Ngăn chặn form submit

	let isFormValid = true;

	if (!validateEmail(emailInput.value)) {
		console.log("invalid");
		errorMessageSpan.classList.add("text-danger");
		errorMessageSpan.textContent = "Email is invalid";
		isFormValid = false;
	} 

	if (!validatePhone(phoneInput.value)) {
		console.log("invalid");
		errorMessageSpan2.classList.add("text-danger");
		errorMessageSpan2.textContent = "Phone is invalid";
		isFormValid = false;
	} 
	// Nếu form không hợp lệ thì ngăn chặn submit và hiển thị thông báo
	/* if (!isFormValid) {
		const errorMsg = document.getElementById('error-msg');
		errorMsg.classList.add('d-block');
	} else {
		// Nếu form hợp lệ thì submit
		form.submit();
	} */
	
	if(isFormValid){
		form.submit();
	}
};

const saveBtn = document.querySelector('button[type="submit"]');
saveBtn.addEventListener('click', validateForm);
    
</script>
</html>